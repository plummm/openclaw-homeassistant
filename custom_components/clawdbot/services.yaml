send_chat:
  name: Send message to Xiaochen (via Clawdbot)
  description: MVP path. Uses Clawdbot Gateway /tools/invoke + message.send (Telegram).
  fields:
    message:
      required: true
      selector:
        text:

tools_invoke:
  name: Invoke a Clawdbot tool via Gateway
  description: Call a single tool via the Clawdbot Gateway /tools/invoke endpoint.
  fields:
    tool:
      required: true
      selector:
        text:
    args:
      required: false
      selector:
        object:

ha_get_states:
  name: List Home Assistant entity states
  description: Lists states locally inside Home Assistant and shows them in a persistent notification.
  fields: {}

ha_call_service:
  name: Call a Home Assistant service
  description: Calls a HA service locally (domain/service/optional entity_id + service_data).
  fields:
    domain:
      required: true
      selector:
        text:
    service:
      required: true
      selector:
        text:
    entity_id:
      required: false
      selector:
        text:
    service_data:
      required: false
      selector:
        object:

chat_append:
  name: Append a chat message
  description: Add a chat message to the local history store (used by the panel).
  fields:
    role:
      required: true
      selector:
        text:
    text:
      required: true
      selector:
        text:
    session_key:
      required: false
      selector:
        text:
    id:
      required: false
      selector:
        text:
    ts:
      required: false
      selector:
        text:

chat_poll:
  name: Poll OpenClaw for new assistant replies (server-side)
  description: Calls OpenClaw sessions_history, sanitizes + dedupes, and appends new agent messages into the HA chat store.
  fields:
    session_key:
      required: false
      selector:
        text:
    limit:
      required: false
      selector:
        number:
          min: 1
          max: 100

chat_send:
  name: Send a message to OpenClaw session (server-side)
  description: Sends a user message to OpenClaw via sessions_send (avoids panel HTTP auth issues).
  fields:
    session_key:
      required: false
      selector:
        text:
    message:
      required: true
      selector:
        text:

chat_history_delta:
  name: Fetch chat history from HA store (optionally since after_ts)
  description: Returns chat_history items from the HA Store; use after_ts to get only new items.
  fields:
    session_key:
      required: false
      selector:
        text:
    after_ts:
      required: false
      selector:
        text:
    limit:
      required: false
      selector:
        number:
          min: 1
          max: 500

set_connection_overrides:
  name: Save/Apply connection overrides
  description: Persist gateway_url/token/session_key overrides to HA storage and apply immediately.
  fields:
    gateway_url:
      required: false
      selector:
        text:
    token:
      required: false
      selector:
        text:
    session_key:
      required: false
      selector:
        text:

reset_connection_overrides:
  name: Reset connection overrides
  description: Clear stored overrides and revert to YAML defaults.
  fields: {}

set_mapping:
  name: Set core signal mapping
  description: Save entity_id mapping for soc/voltage/solar/load.
  fields:
    mapping:
      required: true
      selector:
        object:

create_dummy_entities:
  name: Create dummy entities
  description: Create/refresh dummy sensor states (sensor.clawdbot_test_*) for panel mapping QA.
  fields:
    soc:
      required: false
      selector:
        number:
          min: 0
          max: 100
          mode: box
    voltage:
      required: false
      selector:
        number:
          min: 0
          max: 80
          mode: box
    solar_w:
      required: false
      selector:
        number:
          min: 0
          max: 5000
          mode: box
    load_w:
      required: false
      selector:
        number:
          min: 0
          max: 5000
          mode: box
    connected:
      required: false
      selector:
        boolean:

clear_dummy_entities:
  name: Clear dummy entities
  description: Remove dummy entities created by create_dummy_entities.
  fields: {}
