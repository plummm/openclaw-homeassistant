tools_invoke:
  name: Invoke an OpenClaw Gateway tool (advanced)
  description: Advanced/admin action. Calls a single tool via the OpenClaw Gateway /tools/invoke endpoint. Prefer dedicated services when available.
  fields:
    tool:
      required: true
      description: Tool name (e.g. sessions_list). Calls /tools/invoke.
      selector:
        text: {}
    args:
      required: false
      description: Tool arguments object (JSON). Exact shape depends on the tool.
      selector:
        object: {}

ha_get_states:
  name: List Home Assistant entity states
  description: Lists states locally inside Home Assistant and shows results in a persistent notification (warning: can be noisy/spammy).
  fields: {}

ha_call_service:
  name: Call a Home Assistant service (guardrailed)
  description: Calls a limited allowlist of HA services locally. This is a safe subset vs tools_invoke. (Allowlist is defined in custom_components/clawdbot/__init__.py handle_ha_call_service.)
  fields:
    domain:
      required: true
      description: Service domain (e.g. persistent_notification).
      selector:
        text: {}
    service:
      required: true
      description: Service name (e.g. create).
      selector:
        text: {}
    entity_id:
      required: false
      description: Optional target entity_id (when applicable for the chosen service).
      selector:
        entity: {}
    service_data:
      required: false
      description: Optional service data object (JSON). Example for persistent_notification.create -> {"title":"OpenClaw test","message":"ok"}.
      selector:
        object: {}

set_connection_overrides:
  name: Save/apply connection overrides
  description: Persist gateway_url/token/session_key overrides to HA storage and apply immediately.
  fields:
    gateway_url:
      required: false
      description: Override the OpenClaw Gateway base URL (origin). Example: https://gateway.example.com
      selector:
        text: {}
    token:
      required: false
      description: Override the Gateway auth token (stored in HA plaintext storage).
      selector:
        text: {}
    session_key:
      required: false
      description: Override the Gateway session_key target (defaults to "main").
      selector:
        text: {}

reset_connection_overrides:
  name: Reset connection overrides
  description: Clear stored overrides and revert to YAML defaults.
  fields: {}

set_mapping:
  name: Set core signal mapping
  description: Save entity_id mapping for soc/voltage/solar/load.
  fields:
    mapping:
      required: true
      description: Mapping object. Keys: soc, voltage, solar, load. Values: entity_id strings.
      selector:
        object: {}

journal_append:
  name: Append to agent journal
  description: Append a journal entry; updates OpenClaw automation sensors/events.
  fields:
    text:
      required: true
      description: Journal entry text.
      selector:
        text: {}
    title:
      required: false
      description: Optional short title for the entry.
      selector:
        text: {}
    mood:
      required: false
      description: Optional mood/tag string.
      selector:
        text: {}

journal_list:
  name: List journal entries
  description: Return recent journal entries from HA storage.
  fields:
    limit:
      required: false
      default: 20
      description: Max entries to return.
      selector:
        number:
          min: 1
          max: 200

agent_prompt:
  name: Process a natural-language prompt (via Assist)
  description: Routes text through Home Assistant Assist (conversation.process) and updates OpenClaw automation entities/events.
  fields:
    text:
      required: true
      description: Prompt text to send to Assist.
      selector:
        text: {}
    language:
      required: false
      description: Optional language hint (e.g. en, zh).
      selector:
        text: {}
    agent_id:
      required: false
      description: Optional conversation agent_id to target.
      selector:
        text: {}
    conversation_id:
      required: false
      description: Optional conversation_id to continue an existing Assist thread.
      selector:
        text: {}

tts_vibevoice_health:
  name: VibeVoice TTS health
  description: Check whether the VibeVoice TTS provider is configured and reachable.
  fields: {}

tts_vibevoice:
  name: Generate VibeVoice TTS audio
  description: Generates TTS audio and returns a same-origin audio_url served by HA. If media_player_entity_id is provided, also calls media_player.play_media to play it.
  fields:
    text:
      required: true
      description: Text to synthesize.
      selector:
        text: {}
    format:
      required: false
      default: mp3
      description: Audio format to return.
      selector:
        select:
          options:
            - mp3
            - wav
    media_player_entity_id:
      required: false
      description: Optional. If set, HA will play the generated audio via media_player.play_media; if omitted, only returns audio_url.
      selector:
        entity:
          domain: media_player
